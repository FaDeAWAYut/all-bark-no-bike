[gd_scene load_steps=17 format=3 uid="uid://p3b5yajekrdr"]

[ext_resource type="Script" uid="uid://ct048k6rsjfbb" path="res://scenes/main/main.gd" id="1_e2v34"]
[ext_resource type="Texture2D" uid="uid://doon5fdjxf56p" path="res://assets/bg.png" id="2_7smn1"]
[ext_resource type="PackedScene" uid="uid://dfnmfcww2cu6i" path="res://scenes/dawg/the_dawg.tscn" id="2_631s2"]
[ext_resource type="Texture2D" uid="uid://b3nl81j60fh8g" path="res://assets/bg_turn.png" id="3_th5th"]
[ext_resource type="Script" uid="uid://bj3bj0d8skqwt" path="res://scenes/background/Turn/road_turn.gd" id="4_b1x3f"]
[ext_resource type="PackedScene" uid="uid://cobth27w6p3ja" path="res://scenes/hud/hud.tscn" id="4_dwgw2"]
[ext_resource type="PackedScene" uid="uid://d4mchi4q55xdb" path="res://scenes/motorbike/motorbike.tscn" id="5_6q06x"]
[ext_resource type="Script" uid="uid://w5tembhx3n1a" path="res://scenes/collectable/collectables_manager.gd" id="6_ow5a4"]
[ext_resource type="PackedScene" uid="uid://778k268328ak" path="res://scenes/collectable/cough_drops/cough_drops_pool.tscn" id="7_hujxm"]
[ext_resource type="Script" uid="uid://b7ufw4rkm38q4" path="res://scenes/motorbike/boss_health_controller.gd" id="8_th5th"]
[ext_resource type="Script" uid="uid://b4ka507v7wq1c" path="res://scripts/ObstacleSpawner.gd" id="10_a8run"]
[ext_resource type="Script" uid="uid://dddagrng1jobg" path="res://scripts/BarkController.gd" id="11_ouso4"]
[ext_resource type="Script" uid="uid://ek8hm7xuisk5" path="res://scripts/Pool.gd" id="12_th5th"]
[ext_resource type="AudioStream" uid="uid://cotg1jtn26twy" path="res://assets/sfx/chargebarksfx.mp3" id="13_7smn1"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_blune"]
size = Vector2(64, 504)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_th5th"]
size = Vector2(896, 16)

[node name="Main" type="Node" node_paths=PackedStringArray("obstacleSpawner", "barkController", "collectablesManager")]
script = ExtResource("1_e2v34")
obstacleSpawner = NodePath("ObstacleSpawner")
barkController = NodePath("BarkController")
collectablesManager = NodePath("CollectablesManager")
dogStartPosition = Vector2i(448, 400)
camStartPosition = Vector2i(448, 252)

[node name="ParallaxBG" type="Node2D" parent="."]
scale = Vector2(2, 2)

[node name="Parallax2D" type="Parallax2D" parent="ParallaxBG"]
repeat_size = Vector2(0, 256)
repeat_times = 2
follow_viewport = false
ignore_camera_scroll = true

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBG/Parallax2D"]
texture_filter = 1
texture = ExtResource("2_7smn1")
centered = false

[node name="RoadTurn" type="Sprite2D" parent="." node_paths=PackedStringArray("main_scene", "motorbike", "collectables_manager", "obstacle_spawner")]
texture_filter = 1
position = Vector2(447, -967)
scale = Vector2(2, 2)
texture = ExtResource("3_th5th")
centered = false
offset = Vector2(-483.5, -483.5)
script = ExtResource("4_b1x3f")
probability_turn = 1.0
probability_left_turn = 0.5
road_spawn_position = Vector2i(447, -967)
main_scene = NodePath("..")
motorbike = NodePath("../Motorbike")
collectables_manager = NodePath("../CollectablesManager")
obstacle_spawner = NodePath("../ObstacleSpawner")

[node name="Timer" type="Timer" parent="RoadTurn"]
wait_time = 20.0
autostart = true

[node name="TheDawg" parent="." groups=["player"] instance=ExtResource("2_631s2")]
position = Vector2(448, 500)
scale = Vector2(2, 2)
collision_mask = 3

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(448, 252)

[node name="HUD" parent="." instance=ExtResource("4_dwgw2")]

[node name="PlaceholderBossHP" type="Label" parent="HUD"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -92.0
offset_bottom = 23.0
grow_horizontal = 0
text = "Boss Health"

[node name="Motorbike" parent="." node_paths=PackedStringArray("BossHealthController") groups=["enemy"] instance=ExtResource("5_6q06x")]
position = Vector2(448, 173)
scale = Vector2(2, 2)
spawn_position = Vector2(448, 169)
hide_speed_multiplier = 0.5
BossHealthController = NodePath("BossHealthController")
hit_flash_duration = 1.0

[node name="BossHealthController" type="Node" parent="Motorbike" node_paths=PackedStringArray("hp_label")]
script = ExtResource("8_th5th")
max_health = 2000
hp_label = NodePath("../../HUD/PlaceholderBossHP")

[node name="CollectablesManager" type="Node" parent="." node_paths=PackedStringArray("cough_drop_pool")]
script = ExtResource("6_ow5a4")
cough_drop_pool = NodePath("CoughDropsPool")
cough_drop_scale = 0.5

[node name="CoughDropsPool" parent="CollectablesManager" instance=ExtResource("7_hujxm")]

[node name="ObstacleSpawner" type="Node" parent="."]
script = ExtResource("10_a8run")

[node name="BarkController" type="Node" parent="." node_paths=PackedStringArray("theDawg")]
script = ExtResource("11_ouso4")
theDawg = NodePath("../TheDawg")
barkSpawnOffset = Vector2(0, 0)
normalBarkVolume = -10
charge_bark_sound = ExtResource("13_7smn1")

[node name="BarkPool" type="Node" parent="BarkController"]
script = ExtResource("12_th5th")
pool_size = 5

[node name="Boundary" type="StaticBody2D" parent="."]
collision_layer = 2
collision_mask = 0

[node name="BoundaryLeft" type="CollisionShape2D" parent="Boundary"]
position = Vector2(32, 252)
shape = SubResource("RectangleShape2D_blune")

[node name="BoundaryRight" type="CollisionShape2D" parent="Boundary"]
position = Vector2(864, 252)
shape = SubResource("RectangleShape2D_blune")

[node name="BoundaryTop" type="CollisionShape2D" parent="Boundary"]
position = Vector2(448, 186)
shape = SubResource("RectangleShape2D_th5th")

[node name="BoundaryBottom" type="CollisionShape2D" parent="Boundary"]
position = Vector2(448, 512)
shape = SubResource("RectangleShape2D_th5th")

[connection signal="obstacles_cleared" from="ObstacleSpawner" to="RoadTurn" method="_on_obstacles_cleared"]
